<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="icon" type="image/svg+xml" href="/media/sflogo.svg" />
    <meta name="author" content="GameFox XR" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Multiplayer Game Fox</title>

    <link rel="apple-touch-icon" sizes="180x180" href="/media/sflogo.svg" />
    <link
      rel="icon"
      type="image/svgLogo"
      sizes="32x32"
      href="/media/sflogo.svg"
    />
    <link
      rel="icon"
      type="image/svgLogo"
      sizes="16x16"
      href="/media/sflogo.svg"
    />
    <link rel="manifest" href="/media/site.webmanifest" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="theme-color" content="#ffffff" />
  </head>

  <body>
    <!-- song -->
    <audio id="myAudio" style="display: none" src="/media/music.mp3"></audio>

    <div class="room-code-wrapper">
      ROOM CODE
      <div class="room-code"></div>
      <span class="tooltip">Copy Code</span>
    </div>

    <!-- Preloader -->
    <div class="preloader">
      <div class="preloader-wrapper">
        <img
          src="Symbol Transparent PNG.png"
          width="118"
          height="129"
          viewBox="0 0 118 129"
          fill="none"
          class="svgLogo"
          alt="MainFoxLogo"
        />
        <div class="progress-bar-container">
          <div class="progress-bar"></div>
        </div>
      </div>
      <div class="progress-wrapper">
        <div class="percent preloader-percentage1">0</div>
        <div class="percent preloader-percentage2">0</div>
        <div class="percent symbol">%</div>
      </div>
      <h1 class="preloader-title fade-in-out">Your XR experience is loading</h1>
      <div class="description">
        Get ready to step into a whole new shopping experience! Invite your
        friends and dive into our immersive store together!
      </div>

      <!-- Name Enter Screen -->
      <div class="welcome-title">Welcome to Game Fox</div>
      <div class="name-form">
        <input
          type="text"
          placeholder="What should we call you?"
          id="name-input"
          required
        />
      </div>
      <button id="name-input-button">Continue</button>

      <div class="create-or-join-wrapper">
        <button class="create-button">Create</button>
        <div class="center-text">OR</div>
        <div class="join-wrapper">
          <button id="room-input-button">JOIN</button>
          <input
            type="text"
            name="room-input"
            id="room-input"
            minlength="6"
            maxlength="6"
            autocapitalize="characters"
            pattern="[A-Z]+"
            placeholder="Room Code"
          />
        </div>
      </div>

      <!-- Ready Player Me Interaction -->
      <div class="character-select-title">Choose your avatar:</div>
      <div class="avatar-img-wrapper">
        <img
          src="/images/asian_male_head.png"
          alt=""
          class="avatar-img avatar-left"
        />
        <img
          src="/images/asian_female_head.png"
          alt=""
          class="avatar-img avatar-right"
        />
      </div>
      <div class="customize-character-btn">
        Controls: WASD to move | SHIFT to run | SPACE to jump | ENTER to chat |
        Click/Drag to pan | Middle Mouse to zoom | O to dance | C to switch view
        |
      </div>
      <!-- <iframe
            id="frame"
            class="frame"
            allow="camera *; microphone *; clipboard-write"
        ></iframe> -->
    </div>
    <div class="joystick-area"></div>

    <!-- Mobile Controls -->
    <div class="control-overlay hidden"></div>

    <!-- Experience -->
    <div class="experience-wrapper" id="experienceWrapper">
      <canvas class="experience-canvas"></canvas>
      <div class="crosshair"></div>
      <img id="lensImage" src="Ar Icon.svg" alt="Lens Icon" class="lens-icon" />
      <img
        src="Bot Icon.svg"
        alt="Chatbot Icon"
        class="chatbot-icon"
        id="chatbotImage"
      />
      <img
        src="ChatWithOthers.svg"
        alt="Chat With other icon"
        class="chat-with-other-icon"
        id="chatWithOtherImage"
      />
      <img
        src="images/camera.svg"
        alt="Change View Icon"
        class="change-view-icon"
        id="changeViewIcon"
      />
      <img
        src="Unmute.svg"
        alt="Speaker Icon"
        class="speaker-icon"
        id="speakerIcon"
      />
      <img
        src="Mute.svg"
        alt="Speaker Disbale Icon"
        class="speaker-disable-icon"
        id="speakerDisableIcon"
      />
      <img
        id="powered-by"
        src="logo.avif"
        alt="Powered By Strategy Fox"
        class="powered-by"
      />
      <img
        src="../public/Cart.svg"
        alt="Cart Icon"
        class="cart-icon"
        id="cartIcon"
      />
      <img
        src="../public/Wishlist.svg"
        alt="Wishlist"
        class="wishlist-icon"
        id="wishlistIcon"
      />
    </div>
    <div class="modal-backdrop" id="modalBackdrop"></div>
    <div id="modal" class="modal-container">
      <div class="button-wrapper">
        <div class="viewBtn">
          <button id="viewPhoto" class="toggle-btn">Photos</button>
          <button id="view3dModel" class="toggle-btn">3D View</button>
        </div>
        <div class="closeBtn">
          <button id="xCloseBtn" class="toggle-btn">X</button>
        </div>
      </div>
      <div class="product-card">
        <div class="product-image" id="productImageContainer">
          <!-- Loaded from product.js -->
        </div>
        <div class="product-details" id="productDetails">
          <div class="sticky-header">
            <h1 class="product-title" id="product-title">-</h1>
            <div class="product-price-stock-info">
              <h2 class="product-price" id="product-price">-</h2>
              <button type="button" class="product-stock" id="product-stock">
                -
              </button>
            </div>
            <div class="size-options">
              <!-- Load dynamically in ShopifyBuy -->
              >
            </div>
            <div class="quantity-selector">
              <label for="quantity">Quantity:</label>
              <div class="quantity-controls">
                <button type="button" id="decrement-btn" class="quantity-btn">
                  -
                </button>
                <span id="quantity-display">1</span>
                <button type="button" id="increment-btn" class="quantity-btn">
                  +
                </button>
              </div>
            </div>
          </div>
          <h3 class="description-title">Description</h3>
          <div class="description-div">
            <p id="product-description">
              <!-- loaded in ShopifyBuy -->
              -
            </p>
          </div>
          <div class="buttons-holder">
            <button id="add-to-cart">Add to cart</button>
            <button id="checkout-btn">Checkout</button>
          </div>
        </div>
      </div>
      <!-- <button id="closeModal" class="close-btn">Close</button> -->
    </div>

    <div class="cart-backdrop" id="cartBackdrop"></div>
    <div id="cart-container" class="cart-container">
      <h1 class="cart-title">Your Shopping Cart</h1>
      <div class="cart-items" id="cartItems">
        <!-- Dynamic loading -->
      </div>
      <div class="checkout-div">
        <p class="cart-price">Total: Rs.0</p>
        <button class="cart-checkout-button" id="cartCheckoutButton">
          Checkout
        </button>
        <button class="cart-close-button" id="cartCloseButton">Close</button>
      </div>
    </div>

    <!-- First Modal: Chat with Others -->
    <div id="chatWithOtherModal" class="chatWithOther-modal">
      <div class="chatWithOther-header">
        <div
          style="
            display: flex;
            flex-direction: row;
            justify-content: flex-start;
            margin-left: 0.5rem;
          "
        >
          <img
            src="fox-logo.jpg"
            alt="foxlogo"
            style="height: 30px; padding-right: 1rem"
          />
          <h1>CHAT WITH OTHERS</h1>
        </div>
        <button id="closeChatWithOtherModal" class="close-chatWithOther-btn">
          ×
        </button>
      </div>
      <div id="chatWithOtherHistory"></div>
      <!-- Separate chat history -->
      <form id="chatWithOtherForm">
        <input
          type="text"
          id="chatWithOtherInput"
          placeholder="Enter your message"
        />
        <button type="button" id="chatWithOtherButton">Send</button>
      </form>
      <div id="chatWithOtherLoader">
        <img src="loader.gif" width="150px" alt="Loading..." />
      </div>
    </div>

    <!-- Second Modal: Chat with Fox -->
    <div id="chatbotModal" class="chatbot-modal">
      <div class="chatbot-header">
        <div
          style="
            display: flex;
            flex-direction: row;
            justify-content: flex-start;
            margin-left: 0.5rem;
          "
        >
          <img
            src="fox-logo.jpg"
            alt="foxlogo"
            style="height: 30px; padding-right: 1rem"
          />
          <h1>CHAT WITH FOX</h1>
        </div>
        <button id="closeChatbotModal" class="close-chatbot-btn">×</button>
      </div>
      <div id="chat-history"></div>
      <form id="chat-form">
        <input type="text" id="user-input" placeholder="Enter your message" />
        <button type="button">Send</button>
      </form>
      <div id="loader">
        <img src="loader.gif" width="150px" alt="Loading..." />
      </div>
    </div>

    <script type="module" src="/index.js"></script>
    <script type="module" src="/realtimeaudio.js"></script>
    <script type="module" src="/chatbot.js"></script>
    <script type="module" src="/product.js"></script>
    <script
      type="module"
      src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"
    ></script>
  </body>
</html>
